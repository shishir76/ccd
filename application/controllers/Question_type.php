<?php defined('BASEPATH') OR exit('No direct script access allowed');class Question_type extends Admin_Core_Controller{    public function __construct()    {        parent::__construct();        //check auth        if (!is_admin())         {            redirect('login');        }        //check permission        if (!show_admin_panel())         {            redirect('admin/login');        }    }        /*** Add City */    public function add()    {        $data['title'] = trans("add_question_type");        $this->load->view('admin/includes/_header', $data);        $this->load->view('admin/question_type/add', $data);        $this->load->view('admin/includes/_footer');    }    /*** Add City Post */    public function add_question_type()    {        //validate inputs        $this->form_validation->set_rules('question_type', trans("question_type"), 'required|xss_clean');		$question_type = $this->input->post('question_type', true);		if (!$this->question_type_model->is_unique_field($question_type)) 		{		    $this->session->set_flashdata('form_data', $this->question_type_model->input_values());		    $this->session->set_flashdata('error', trans("message_field_already_error"));		    redirect($this->agent->referrer());		}        if ($this->form_validation->run() === false)         {            $this->session->set_flashdata('errors', validation_errors());            $this->session->set_flashdata('form_data', $this->question_type_model->input_values());            redirect($this->agent->referrer());        }         else         {            if ($this->question_type_model->add())             {                $last_id = $this->db->insert_id();				$this->session->set_flashdata('success', trans("question_type") . " " . trans("msg_suc_added"));                redirect($this->agent->referrer());            }             else             {                $this->session->set_flashdata('form_data', $this->question_type_model->input_values());                $this->session->set_flashdata('error', trans("msg_error"));                redirect($this->agent->referrer());            }        }    }    /*** City List View */    public function listview()    {        $data['title'] = trans("question_types");        $data['question_types'] = $this->question_type_model->get_all_question_types();        $data['lang_search_column'] = 2;        $this->load->view('admin/includes/_header', $data);        $this->load->view('admin/question_type/listview', $data);        $this->load->view('admin/includes/_footer');    }    /*** Update City */    public function update($id)    {        $data['title'] = trans("update_question_type");        //find city        $data['question_type'] = $this->question_type_model->get_question_type($id);        //poll not found        if (empty($data['question_type']))         {            redirect($this->agent->referrer());        }        $this->load->view('admin/includes/_header', $data);        $this->load->view('admin/question_type/update', $data);        $this->load->view('admin/includes/_footer');    }    /*** Update City Post */    public function update_question_type()    {        //validate inputs        $this->form_validation->set_rules('question_type', trans("question_type"), 'required|xss_clean');	        if ($this->form_validation->run() === false)         {            $this->session->set_flashdata('errors', validation_errors());            $this->session->set_flashdata('form_data', $this->question_type_model->input_values());            redirect($this->agent->referrer());        }         else         {            //get id            $id = $this->input->post('id', true);            $question_type = $this->input->post('question_type', true);            if (!$this->question_type_model->is_unique_field($question_type, $id)) {                $this->session->set_flashdata('error', trans("message_field_already_error"));                redirect($this->agent->referrer());            }                        if ($this->question_type_model->update($id))             {				$this->session->set_flashdata('success', trans("question_type") . " " . trans("msg_suc_updated"));                redirect('question_type/listview');            }             else             {                $this->session->set_flashdata('form_data', $this->question_type_model->input_values());                $this->session->set_flashdata('error', trans("msg_error"));                redirect($this->agent->referrer());            }        }    }    /*** Delete City Post */    public function delete_question_type()    {        $id = $this->input->post('id', true);        $question_type = $this->question_type_model->get_question_type($id);        if (empty($question_type))         {            redirect($this->agent->referrer());        }        if ($this->question_type_model->delete($id))         {            $this->session->set_flashdata('success', trans("question_type") . " " . trans("msg_suc_deleted"));            redirect($this->agent->referrer());        } else         {            $this->session->set_flashdata('error', trans("msg_error"));            redirect($this->agent->referrer());        }    }}